<!DOCTYPE html>
<html lang="en">

<head>
  <script src="https://download.affectiva.com/js/3.2/affdex.js"></script>
  <style>
    #emoji {
      font-size: 10em;
    }
  </style>
</head>

<body>
  <div id='video'></div>
  <div id='emoji'></div>
</body>
<script>
  window.onload = function () {
    const videoWidth = 640, videoHeight = 480
    const faceMode = affdex.FaceDetectorMode.LARGE_FACES

    const detector = new affdex.CameraDetector(
      document.querySelector('#video'),
      videoWidth, videoHeight, faceMode
    )

    //detector.detectEmotions.joy = true
    detector.detectAllExpressions.eyeClosure = true
    //detector.detectAllEmojis()

    detector.addEventListener('onImageResultsSuccess', function (faces) {
      if (faces.length > 0) {
        //document.querySelector('#emoji').innerText = faces[0].emojis.dominantEmoji

        console.log(faces[0]);

        if (faces[0].expressions.eyeClosure = true) {
          document.querySelector('#emoji').innerText = "Eyes closed!";
        } else {
          document.querySelector('#emoji').innerText = "Eyes open!";
        }


      }
    })

    detector.start()
  }
</script>

</html>